# Краткие правила разработки тестов для ИИ агента

## 1. Анализ модуля перед тестированием
Изучи структуру и публичные методы тестируемого модуля. Определи зависимости (файловая система, внешние API, базы данных) и выбери стратегию мокинга. Создай план тестирования с фокусом на контракты методов.

## 2. Структура и организация тестов
Создавай один тестовый файл на модуль с названием "имяМодуля.test.ts". Группируй тесты в describe/suite блоки по функциональности (настройка, основная логика, обработка ошибок). Используйте clear и descriptive названия тестов на русском языке.

## 3. Создание тестовых данных
Создавай отдельную директорию test-data/ с реальными файлами для тестирования файловых операций. Генерируй валидные и невалидные тестовые данные для покрытия всех сценариев. Подготавливай данные в beforeEach и очищай в afterEach для изоляции тестов.

## 4. Покрытие функциональности
Тестируй все публичные методы модуля с фокусом на успешные и неуспешные сценарии. Проверяй обработку граничных случаев (пустые данные, null, undefined). Используй assert.rejects для тестирования исключений и assert.strictEqual для проверки конкретных значений.

## 5. Интеграция с тестовой системой
Добавляй новые тесты в команду test:unit в package.json для автоматического запуска. Создавай документацию тестов в docs/tests/ с описанием покрытия и инструкциями запуска. Запускай все тесты после изменений для проверки корректности.

## 6. Качество и поддержка тестов
Используй строгие assertions (strictEqual, deepStrictEqual) для точной проверки результатов. Обеспечивай независимость тестов друг от друга без общего состояния. Проверяй типы возвращаемых значений и корректность обработки ошибок.

## 7. Обработка зависимостей и мокинг
Мокай внешние зависимости (API, базы данных, файловую систему) для изоляции тестируемого модуля. Создавай простые и понятные моки с минимальной логикой. Используй реальные файлы когда возможно вместо сложных моков файловой системы.

## 8. Валидация и отладка тестов
Проверяй логику тестов на корректность перед коммитом с помощью отладочного вывода. Валидируй ожидаемые результаты с реальными данными. Поддерживай тесты в актуальном состоянии при изменении API модуля.